<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BLASTAM Risk Map for Rice Blast Disease</title>
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
  />
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    /* 地図部分は画面全高からcontrols分を引いた高さ */
    #map {
      height: calc(100% - 60px);
    }
    /* コントロールパネルの高さを固定 */
    #controls {
      height: 60px;
      display: flex;
      align-items: center;
      background-color: #f9f9f9;
      padding: 0 10px;
    }
    #loading {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.7); color: white;
      display: flex; justify-content: center; align-items: center;
      font-size: 24px; z-index: 1000;
    }
    /* 以下、元のスタイルをそのまま */
    #info {
      display: none; position: fixed; top: 10%; left: 10%;
      width: 80%; height: 80%; background-color: white;
      padding: 20px; box-shadow: 0 0 10px rgba(0,0,0,0.5);
      overflow-y: auto; z-index: 1001;
    }
    #infoButton {
      background-color: #007bff; color: white; border: none;
      border-radius: 50%; width: 40px; height: 40px;
      font-size: 24px; text-align: center; line-height: 40px;
      cursor: pointer; margin-right: 10px;
    }
    #dateSliderContainer {
      display: flex; align-items: center; width: 100%;
    }
    #dateSliderContainer label { margin-right: 10px; font-weight: bold; }
    #dateSlider { flex: 1; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 6px; text-align: center; }
    th { background-color: #f2f2f2; }
    .low-risk { background-color: green; color: white; }
    .medium-risk { background-color: yellow; color: black; }
    .high-risk { background-color: red; color: white; }
    .popup-content { max-height: 70vh; max-width: 50vw; overflow-y: auto; }
    .station-info { margin-top: 10px; }
  </style>
  <!-- Google Analytics などはそのまま -->
</head>

<body>
  <div id="loading">データを読み込んでいます。お待ちください... / Loading data, please wait...</div>

  <!-- ヘッダーを削除 -->

  <div id="map"></div>

  <div id="controls">
    <button id="infoButton" title="情報 / Info">?</button>
    <div id="dateSliderContainer">
      <label for="modelSelect">モデル選択 / Model:</label>
      <select id="modelSelect">
        <option value="blastam">BLASTAM</option>
      </select>
      <label for="dateSlider">日付/Date:</label>
      <input type="range" id="dateSlider" min="0" max="59" value="0">
      <span id="dateDisplay" style="margin-left:10px;"></span>
    </div>
  </div>

  <div id="info">
    <!-- 情報パネルの中身は省略 -->
    <button onclick="closeInfo()">閉じる / Close</button>
  </div>

  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.8.9/jquery.csv.min.js"></script>
  <script>
    /* 既存のJSコードをそのまま貼り付け */
  </script>
</body>
</html>
